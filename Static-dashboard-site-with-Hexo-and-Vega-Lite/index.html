<!DOCTYPE html><html><head><meta charset="utf-8"><title>Dashboard site with Hexo and Vega-Lite | Wilson&#39;s blog</title><link rel="stylesheet" href="../css/fonts/Chinese-normal-normal.min.css"><link rel="stylesheet" href="../css/fonts/ChineseMono-normal-normal.min.css"><link rel="stylesheet" href="../css/fonts/Chinese-italic-normal.min.css"><link rel="stylesheet" href="../css/fonts/Chinese-normal-bold.min.css"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="最近写一篇论文需要画 10 张实验数据图，我用一套祖传的 Matplotlib 脚本读取 csv 实验数据画图。这个过程有几个很痛苦的问题：

实验数据管理比较混乱，例如我可能每次批量做实验只会更新表格的一行/一列，csv 又没有注释，到后面就忘记每行是什么时候做的了
每张图的样子都不太一样，并且脚"><link rel="alternate" href="../atom.xml" title="Wilson's blog" type="application/atom+xml"><link rel="shortcut icon" href="../favicon.ico"><link rel="stylesheet" href="../css/style.css"><link rel="stylesheet" href="../fancybox/jquery.fancybox-1.3.4.css"><link rel="stylesheet" href="../katex/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous"><script defer src="../katex/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script><script defer src="../katex/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body)"></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="container"><div id="wrap"><div id="nav-outer"><nav id="main-nav" class="outer"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/blog/">Home</a> <a class="main-nav-link" href="/blog/archives/">Archives</a> <a class="main-nav-link" href="/blog/paper_list/">Paper List</a> <a class="main-nav-link" href="/blog/about/">About</a><div class="main-nav-space-between"></div><a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS 订阅"></a></nav></div><div id="header-title"><h1 id="logo-wrap"><a href="../index.html" id="logo">Wilson&#39;s blog</a></h1></div><div id="content" class="outer"><section id="main"><article id="post-Static-dashboard-site-with-Hexo-and-Vega-Lite" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><div class="article-meta"><a href="" class="article-date"><time class="dt-published" datetime="2025-08-02T12:56:12.000Z" itemprop="datePublished">2025-08-02</time></a></div><div class="article-inner"><header class="article-header"><h1 class="p-name article-title" itemprop="headline name">Dashboard site with Hexo and Vega-Lite</h1></header><div class="e-content article-entry" itemprop="articleBody"><p>最近写一篇论文需要画 10 张实验数据图<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>我用一套祖传的 Matplotlib 脚本读取 csv 实验数据画图<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span>这个过程有几个很痛苦的问题<span class="bd-box"><h-char class="bd bd-beg"><h-inner>：</h-inner></h-char></span></p><ol><li>实验数据管理比较混乱<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>例如我可能每次批量做实验只会更新表格的一行/一列<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>csv 又没有注释<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>到后面就忘记每行是什么时候做的了</li><li>每张图的样子都不太一样<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>并且脚本代码高度耦合<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>所以基本上我为每张图都要维护一个脚本</li><li>我和合作者希望能在线实时共享实验数据</li></ol><p>为了解决 3<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>我们日常在用飞书智能表格的仪表盘功能登记数据<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>但它的格式无法定制而且比较丑<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>导致用在论文里的图还得重新画<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span>并且没有历史记录功能<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>也就是解决不了 1 和 2<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span></p><p>我尝试为这三个问题寻找成熟的解决方案<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span>对于问题 1<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>直观的解决方案就是用 Git 对 csv 进行版本管理<span class="bd-box"><h-char class="bd bd-beg"><h-inner>；</h-inner></h-char></span>实际上这还有一点小问题就是 csv 的修改有时是和画图脚本绑定的<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>也就是 csv 和画图脚本需要同时做版本管理<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span>这就来到了问题 2<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>我认为我们 csv 入图片出的流程是没有问题的<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>但这个转换流程的实现不够理想<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>理想情况应该存在一个 markup language<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>描述数据到图片的映射过程<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>对这个 markup language 做版本管理就比管理画图脚本要美丽的多<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span>ChatGPT 告诉了我 Vega-Lite 这个项目<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>我认为它完美地做到了我需要的事<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span>问题 3 解决方案就比较多了<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>无非是创建一个网站<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>我最熟悉的就是 Hexo 引擎<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span></p><p>他们结合在一起之后<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>就得到了一个我非常喜欢的<span class="bd-box"><h-char class="bd bd-beg"><h-inner>、</h-inner></h-char></span>有点 Unix 哲学的工具链(do one thing and do it well)<span class="bd-box"><h-char class="bd bd-beg"><h-inner>：</h-inner></h-char></span>用 Hexo 生成静态网站<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>用 Vega-Lite 描述图片格式<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>用 Git 对源数据和图片格式做版本管理<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span>它被实现为我个人博客主题的一个<a target="_blank" rel="noopener" href="https://github.com/bill-xia/hexo-theme-mashiro/tree/vega-lite?tab=readme-ov-file#%E6%95%B0%E6%8D%AE%E5%9B%BE%E8%A1%A8">特性</a><span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span></p><h3 id="preview">Preview</h3><p><a target="_blank" rel="noopener" href="https://github.com/bill-xia/hexo-theme-mashiro/tree/vega-lite?tab=readme-ov-file#%E5%AE%89%E8%A3%85">欢迎使用<span class="bd-box"><h-char class="bd bd-beg"><h-inner>！</h-inner></h-char></span></a></p><p>使用流程就是写一篇普通的博客<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>插入一个代码块<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>指定语言为 vega-lite<span class="bd-box"><h-char class="bd bd-beg"><h-inner>：</h-inner></h-char></span></p><div class="highlight"><pre class="code"><code>```vega-lite
data:
  url: /data/cars.csv
mark: point
encoding: 
  x: 
    field: kmpl
    type: quantitative
  y: 
    field: price
    type: quantitative
```
</code></pre></div><p>然后创建一个 <code>source/data/car.csv</code> 文件<span class="bd-box"><h-char class="bd bd-beg"><h-inner>：</h-inner></h-char></span></p><div class="highlight"><pre class="code"><code><span class="hljs-attribute">brand</span>,model,price,kmpl,bhp,type
<span class="hljs-attribute">Chevrolet</span>,Beat,<span class="hljs-number">421</span>,<span class="hljs-number">18</span>.<span class="hljs-number">6</span>,<span class="hljs-number">79</span>,Hatchback
<span class="hljs-attribute">Chevrolet</span>,Sail,<span class="hljs-number">551</span>,<span class="hljs-number">18</span>.<span class="hljs-number">2</span>,<span class="hljs-number">82</span>,Sedan
<span class="hljs-attribute">Chevrolet</span>,Sail Hatchback,<span class="hljs-number">468</span>,<span class="hljs-number">18</span>.<span class="hljs-number">2</span>,<span class="hljs-number">82</span>,Hatchback
<span class="hljs-attribute">Chevrolet</span>,Spark,<span class="hljs-number">345</span>,<span class="hljs-number">16</span>.<span class="hljs-number">2</span>,<span class="hljs-number">62</span>,Hatchback
<span class="hljs-attribute">Fiat</span>,Linea Classic,<span class="hljs-number">612</span>,<span class="hljs-number">14</span>.<span class="hljs-number">9</span>,<span class="hljs-number">89</span>,Sedan
<span class="hljs-attribute">Fiat</span>,Linea,<span class="hljs-number">700</span>,<span class="hljs-number">15</span>.<span class="hljs-number">7</span>,<span class="hljs-number">112</span>,Sedan
<span class="hljs-attribute">Fiat</span>,Punto Evo,<span class="hljs-number">499</span>,<span class="hljs-number">15</span>.<span class="hljs-number">8</span>,<span class="hljs-number">67</span>,Hatchback
<span class="hljs-attribute">Ford</span>,Classic,<span class="hljs-number">506</span>,<span class="hljs-number">14</span>.<span class="hljs-number">1</span>,<span class="hljs-number">100</span>,Sedan
<span class="hljs-attribute">Ford</span>,Figo,<span class="hljs-number">414</span>,<span class="hljs-number">15</span>.<span class="hljs-number">3</span>,<span class="hljs-number">70</span>,Hatchback
<span class="hljs-attribute">Honda</span>,Amaze,<span class="hljs-number">519</span>,<span class="hljs-number">18</span>,<span class="hljs-number">87</span>,Sedan
<span class="hljs-attribute">Honda</span>,Brio,<span class="hljs-number">421</span>,<span class="hljs-number">19</span>.<span class="hljs-number">4</span>,<span class="hljs-number">87</span>,Hatchback
<span class="hljs-attribute">Hyundai</span>,EON,<span class="hljs-number">302</span>,<span class="hljs-number">21</span>.<span class="hljs-number">1</span>,<span class="hljs-number">55</span>,Hatchback
<span class="hljs-attribute">Hyundai</span>,i<span class="hljs-number">10</span>,<span class="hljs-number">418</span>,<span class="hljs-number">19</span>.<span class="hljs-number">8</span>,<span class="hljs-number">68</span>,Hatchback
<span class="hljs-attribute">Hyundai</span>,i<span class="hljs-number">20</span>,<span class="hljs-number">523</span>,<span class="hljs-number">18</span>.<span class="hljs-number">6</span>,<span class="hljs-number">82</span>,Hatchback
<span class="hljs-attribute">Hyundai</span>,Verna,<span class="hljs-number">774</span>,<span class="hljs-number">17</span>.<span class="hljs-number">4</span>,<span class="hljs-number">106</span>,Sedan
<span class="hljs-attribute">Hyundai</span>,Xcent,<span class="hljs-number">496</span>,<span class="hljs-number">19</span>.<span class="hljs-number">1</span>,<span class="hljs-number">82</span>,Sedan
<span class="hljs-attribute">Suzuki</span>,Alto,<span class="hljs-number">315</span>,<span class="hljs-number">24</span>.<span class="hljs-number">1</span>,<span class="hljs-number">67</span>,Hatchback
<span class="hljs-attribute">Suzuki</span>,Alto <span class="hljs-number">800</span>,<span class="hljs-number">248</span>,<span class="hljs-number">22</span>.<span class="hljs-number">7</span>,<span class="hljs-number">47</span>,Hatchback
<span class="hljs-attribute">Suzuki</span>,Celerio,<span class="hljs-number">392</span>,<span class="hljs-number">23</span>.<span class="hljs-number">1</span>,<span class="hljs-number">67</span>,Hatchback
<span class="hljs-attribute">Suzuki</span>,Ciaz,<span class="hljs-number">725</span>,<span class="hljs-number">20</span>.<span class="hljs-number">7</span>,<span class="hljs-number">91</span>,Sedan
<span class="hljs-attribute">Suzuki</span>,Estilo,<span class="hljs-number">338</span>,<span class="hljs-number">19</span>,<span class="hljs-number">67</span>,Hatchback
<span class="hljs-attribute">Suzuki</span>,Ritz,<span class="hljs-number">442</span>,<span class="hljs-number">18</span>.<span class="hljs-number">5</span>,<span class="hljs-number">86</span>,Hatchback
<span class="hljs-attribute">Suzuki</span>,Swift,<span class="hljs-number">462</span>,<span class="hljs-number">20</span>.<span class="hljs-number">4</span>,<span class="hljs-number">83</span>,Hatchback
<span class="hljs-attribute">Suzuki</span>,Swift DZire,<span class="hljs-number">508</span>,<span class="hljs-number">19</span>.<span class="hljs-number">1</span>,<span class="hljs-number">86</span>,Sedan
<span class="hljs-attribute">Suzuki</span>,SX<span class="hljs-number">4</span>,<span class="hljs-number">715</span>,<span class="hljs-number">16</span>.<span class="hljs-number">5</span>,<span class="hljs-number">103</span>,Sedan
<span class="hljs-attribute">Suzuki</span>,Wagon-R,<span class="hljs-number">363</span>,<span class="hljs-number">20</span>.<span class="hljs-number">5</span>,<span class="hljs-number">67</span>,Hatchback
<span class="hljs-attribute">Nissan</span>,Datsun GO,<span class="hljs-number">312</span>,<span class="hljs-number">20</span>.<span class="hljs-number">6</span>,<span class="hljs-number">67</span>,Hatchback
<span class="hljs-attribute">Nissan</span>,Micra,<span class="hljs-number">413</span>,<span class="hljs-number">19</span>.<span class="hljs-number">5</span>,<span class="hljs-number">67</span>,Hatchback
<span class="hljs-attribute">Nissan</span>,Sunny,<span class="hljs-number">699</span>,<span class="hljs-number">16</span>.<span class="hljs-number">9</span>,<span class="hljs-number">98</span>,Sedan
<span class="hljs-attribute">Renault</span>,Pulse,<span class="hljs-number">446</span>,<span class="hljs-number">18</span>,<span class="hljs-number">74</span>,Hatchback
<span class="hljs-attribute">Renault</span>,Scala,<span class="hljs-number">724</span>,<span class="hljs-number">16</span>.<span class="hljs-number">9</span>,<span class="hljs-number">98</span>,Sedan
<span class="hljs-attribute">San</span>,Storm,<span class="hljs-number">595</span>,<span class="hljs-number">16</span>,<span class="hljs-number">59</span>,Sedan
<span class="hljs-attribute">Skoda</span>,Fabia,<span class="hljs-number">503</span>,<span class="hljs-number">16</span>.<span class="hljs-number">4</span>,<span class="hljs-number">75</span>,Hatchback
<span class="hljs-attribute">Skoda</span>,Rapid,<span class="hljs-number">756</span>,<span class="hljs-number">15</span>,<span class="hljs-number">104</span>,Sedan
<span class="hljs-attribute">Tata</span>,Indigo,<span class="hljs-number">499</span>,<span class="hljs-number">14</span>,<span class="hljs-number">65</span>,Sedan
<span class="hljs-attribute">Tata</span>,Nano,<span class="hljs-number">199</span>,<span class="hljs-number">23</span>.<span class="hljs-number">9</span>,<span class="hljs-number">38</span>,Hatchback
<span class="hljs-attribute">Tata</span>,Zest,<span class="hljs-number">481</span>,<span class="hljs-number">17</span>.<span class="hljs-number">6</span>,<span class="hljs-number">89</span>,Sedan
<span class="hljs-attribute">Toyota</span>,Etios,<span class="hljs-number">603</span>,<span class="hljs-number">16</span>.<span class="hljs-number">8</span>,<span class="hljs-number">89</span>,Sedan
<span class="hljs-attribute">Toyota</span>,Etios Liva,<span class="hljs-number">500</span>,<span class="hljs-number">17</span>.<span class="hljs-number">7</span>,<span class="hljs-number">79</span>,Hatchback
<span class="hljs-attribute">Volkswagen</span>,Polo,<span class="hljs-number">535</span>,<span class="hljs-number">16</span>.<span class="hljs-number">5</span>,<span class="hljs-number">74</span>,Hatchback
<span class="hljs-attribute">Volkswagen</span>,Up,<span class="hljs-number">360</span>,<span class="hljs-number">21</span>,<span class="hljs-number">74</span>,Hatchback
<span class="hljs-attribute">Volkswagen</span>,Vento,<span class="hljs-number">785</span>,<span class="hljs-number">16</span>.<span class="hljs-number">1</span>,<span class="hljs-number">104</span>,Sedan
</code></pre></div><p>原本代码块的位置就会变成一张数据图<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>效果如下<span class="bd-box"><h-char class="bd bd-beg"><h-inner>：</h-inner></h-char></span></p><p><img src="https://i.meee.com.tw/P9a5T1k.png" alt="visdown preview"></p><h3 id="future-work">Future Work</h3><p>我还没有重度使用这个工具链<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>所以暂时还是不知道版本管理的负担有没有变轻<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>以及这样的静态网站是否真的能满足共享数据需求<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>但总体而言他目前的样子我很喜欢<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>并且图片调好之后基本可以直接放到论文里用<span class="bd-box"><h-char class="bd bd-end"><h-inner>（</h-inner></h-char></span>但还需要根据论文排版调整一些大小/比例之类的<span class="bd-box"><h-char class="bd bd-beg"><h-inner>）</h-inner></h-char><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span></p><p>Do one thing and do it well 也不一定永远是好的<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>因为 thing 的定义可能很善变<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>例如我可能有一天会想对比两个 git 版本的图到底区别如何<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>hexo 看起来就不能很方便地做好这件事情<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span>再比如 dashboard 可能需要布局来在一屏之内放尽可能多的图<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>这对我的博客主题而言也很难实现<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span></p><p>现在已经可以导出 svg<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>但 LaTeX 里用的话还需要转换成 pdf<span class="bd-box"><h-char class="bd bd-beg"><h-inner>，</h-inner></h-char></span>转换成 pdf 并裁切的功能应该比较实用<span class="bd-box"><h-char class="bd bd-beg"><h-inner>。</h-inner></h-char></span></p></div><footer class="article-footer"></footer></div><nav id="article-nav"><a href="../Profiling/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">Profiling with Perf</div></a></nav></article></section></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2024 Wilson Xia<br>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/bill-xia/hexo-theme-mashiro" target="_blank">Mashiro</a><br></div></div></footer></div><nav id="mobile-nav"><a href="/blog/" class="mobile-nav-link">Home</a> <a href="/blog/archives/" class="mobile-nav-link">Archives</a> <a href="/blog/paper_list/" class="mobile-nav-link">Paper List</a> <a href="/blog/about/" class="mobile-nav-link">About</a></nav><script src="../js/clipboard.min.js"></script><script src="../js/jquery-1.4.3.min.js"></script><script src="../fancybox/jquery.fancybox-1.3.4.pack.js"></script><script src="../js/script.js"></script></div></body></html>